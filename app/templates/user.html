{% extends 'base.html' %}
{% import "bootstrap_wtf.html" as wtf %}

{% block content %}
<table class="table table-hover">
  <tr valign="top">
    <td><img src="{{ user.avatar(128) }}"></td>
    <td>
      <h1>User: {{ user.username }}</h1>
      {% if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}
      {% if user.last_seen %}<p>Last seen on: {{ user.last_seen }}</p>{% endif %}
      <p>{{ user.followers_count() }} followers, {{ user.following_count() }} following.</p>
      {% if user==current_user %}
      <p><a href="{{ url_for('edit_profile') }}">Edit your profile</a></p>
      {% elif not current_user.is_following(user) %}
      <p>
      <form action="{{ url_for('follow', username=user.username) }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(value="Follow", class="btn btn-primary") }}
      </form>
      </p>
      {% else %}
      <p>
      <form action="{{ url_for('unfollow', username=user.username) }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(value="Unfollow", class="btn btn-primary") }}
      </form>
      </p>
      {% endif %}
    </td>
  </tr>
</table>
<hr>
{% for post in posts %}
{% include '_post.html' %}
{% endfor %}

<nav aria-label="Post navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item {% if not prev_url %} disabled{% endif %}">
      <a class="page-link" href="{{ prev_url }}"">Newer posts</a>
    </li>
    <li class=" page-item {% if not next_url %} disabled{% endif %}">
        <a class="page-link" href="{{ next_url }}">Older posts</a>
    </li>
  </ul>
</nav>

{% endblock %}